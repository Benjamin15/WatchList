#!/bin/bash

# Test de diagnostic pour les probl√®mes MediaDetailScreen
echo "üß™ Diagnostic MediaDetailScreen - Probl√®me d'affichage"
echo "====================================================="

echo "üêõ Probl√®mes identifi√©s:"
echo "   1. Text strings must be rendered within a <Text> component"
echo "   2. Le mauvais film est affich√© dans la vue d√©tail"

echo ""
echo "‚úÖ Corrections apport√©es:"
echo ""
echo "üìù 1. Correction du rendu de texte:"
echo "   - Ajout de la fonction safeText() pour convertir en string"
echo "   - Correction des propri√©t√©s qui retournent des nombres"
echo "   - Gestion s√©curis√©e des valeurs null/undefined"

echo ""
echo "üîç 2. Diagnostic pour le mauvais film:"
echo "   - Ajout de logs d√©taill√©s dans loadMediaDetails()"
echo "   - Logs dans extractTmdbId() pour tracer l'ID"
echo "   - V√©rification des donn√©es pass√©es depuis RoomScreen"
echo "   - Fallback sur les donn√©es de base si pas de TMDB ID"

echo ""
echo "üß™ Pour diagnostiquer:"
echo "   1. D√©marrer l'app mobile avec les logs activ√©s"
echo "   2. Aller dans une room avec des m√©dias"
echo "   3. Cliquer sur un m√©dia"
echo "   4. V√©rifier les logs dans la console:"
echo "      - [MediaDetailScreen] Media re√ßu: ..."
echo "      - [extractTmdbId] Media re√ßu: ..."
echo "      - [MediaDetailScreen] TMDB ID extrait: ..."

echo ""
echo "üéØ Questions √† v√©rifier:"
echo "   - Les donn√©es Media de la room ont-elles un tmdbId correct ?"
echo "   - Le tmdbId correspond-il au bon film ?"
echo "   - Y a-t-il une confusion entre l'ID local et l'ID TMDB ?"
echo "   - Les d√©tails TMDB r√©cup√©r√©s correspondent-ils au film attendu ?"

echo ""
echo "üì± Test manual:"
echo "   1. cd mobile && npm start"
echo "   2. Ouvrir les logs de d√©veloppement"
echo "   3. Naviguer vers une room"
echo "   4. Cliquer sur un m√©dia connu"
echo "   5. V√©rifier que le titre affich√© correspond au m√©dia cliqu√©"
echo "   6. Si ce n'est pas le cas, v√©rifier les logs pour tracer le probl√®me"
